/*! dtb-m.js - v2.6.0 - 2020-09-25 01:30:33 */!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){o(t,e,n[e])})}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=n(1);window.amzn=window.amzn||{},window.amzn.dtb=window.amzn.dtb||{},function(c){var l,n=!1,o=!1,p="aax-us-east.amazon-adsystem.com",g=null,u=null,m="https://",i="__dtbAd__",r=/linux.*android.*?/g.test(window.navigator.userAgent.toLowerCase()),w=/(iphone|ipod|ipad).*applewebkit.*?/g.test(window.navigator.userAgent.toLowerCase()),a=!1,d=!1,s=!1,f=!1;c.sdkType="unknown";var t="https://c.amazon-adsystem.com/bao-csm/mobile/csm.js.gz",v={nike:{sampleRate:1,currentlySampling:!1},apsLibraryError:{sampleRate:10,currentlySampling:!1},gmaSDK:{sampleRate:1,currentlySampling:!1},deepLink:{sampleRate:1,currentlySampling:!1},adRendering:{sampleRate:1,currentlySampling:!1},skAdNetworkMraid:{sampleRate:1,currentlySampling:!1}},h={networkCalls:{pixels:[],imp:[]},logs:[]},y=!1,b=!1;N(!(c.log=function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t]+" ",n&&console&&console.log&&!o&&console.log(e);h.logs.push(e)}));var I,E=(I=!1,{impRendered:function(){var e=A(1);z.send(e,g)},mraid3Comparison:function(){v.nike.currentlySampling&&"3.0"===mraid.getVersion()&&(mraid.addEventListener("viewableChange",S),mraid.addEventListener("exposureChange",k),S())}});function S(){if(mraid.isViewable()&&!I){var e=A(2);z.send(e,g),I=!0,window.mraid.removeEventListener("viewableChange",S)}}function k(e){if(1<=e){var t=A(3);z.send(t,g),window.mraid.removeEventListener("exposureChange",k)}}function A(e){return{p:e,_type:"nike"}}var z={send:function(e,t){try{M(t?_(e,t):j(e))}catch(e){console.log(e)}},getUrl:function(e,t){try{return t?_(e,t):j(e)}catch(e){return console.log(e),null}}};function x(e){var t=JSON.stringify(function(e){return q({},{lv:"2.6.0",ts:n?0:Date.now(),_tl:"aps-mtag"},e)}(e));return t=function(e){return e.replace(/\\.{1}/g,"")}(t),t=encodeURIComponent(t)}function L(){return m+p+"/x/px/"}function M(e){(new Image).src=e,h.networkCalls.pixels.push(e),c.log("Pixel sent: ".concat(e))}function j(e){return L()+"p/PH/"+x(e)+O()}function _(e,t){return L()+t+"/"+x(e)+O()}function O(){return"?cb="+(n?0:Math.round(1e7*Math.random()))}function R(e,t){var n=1<arguments.length&&void 0!==t?t:{},i=JSON.stringify(q({},n));c.log("".concat(e," pixel evaluation: ").concat(i)),v[e].currentlySampling&&(z.send(q({_type:e},n),g),n.e&&"iFrameSize"===n.e.et&&(b=!0))}function C(e){try{var t=parseInt(e,10);if(!isNaN(t)){if(t<=0)return!1;if(100<=t)return!0;if(100*Math.random()<=t)return!0}return!1}catch(e){return!1}}function N(e){for(var t in v)v.hasOwnProperty(t)&&(v[t].currentlySampling=!!e||C(v[t].sampleRate))}function D(){if(y)c.log("Impression pixel already fired.");else{c.log("Firing impression on viewable event, with Pricepoint",u,"and bidId:",g);var e=m+p+"/e/msdk/imp?b="+g+"&ps="+u+"&rnd="+Math.floor(1e5*Math.random()+1);(new Image).src=e,h.networkCalls.imp.push(e),y=!0,R("adRendering",{adrendering:K()&&window.MRAID_ENV.sdk||window.location.host}),f&&R("skAdNetworkMraid",{mraidfound:/\bmraid(?!.js)/.test(l.contentWindow.document.body.innerHTML)})}}function P(e){var t='{"adViewability":[{"error": {"m": "'+e+'"}}], "c": "viewability", "api": "MAPP", "error": 1}';(new Image).src=m+p+"/x/px/"+g+"/"+t+"?cb="+Math.round(1e7*Math.random())}function V(){if(!("mraid"in window))return c.log("Error","Mraid object not found, impression will not be made."),void c.log('Please include \'<script type="text/javascript" src="mraid.js"><\/script>\' in your creative.');c.log("Registering impression rendered event, with Pricepoint",u,"and bidId:",g),E.impRendered();function e(){mraid.isViewable()&&(window.addEventListener("resize",F),F())}mraid.addEventListener("viewableChange",e),e(),function(){if(!0===c.ev){c.log("Injecting viewability script");var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=function(){if(c.log("Viewability script loaded"),window.amzncsm&&"function"==typeof window.amzncsm.rmRM){var e,t=document.getElementById(i);if(t){var n=t.getElementsByTagName("iframe");n&&0<n.length&&(e=n[0])}window.amzncsm.host=p,e?window.amzncsm.rmRM(g,e):P("ad iframe not found")}else P("amzncsm.rmRM is not a function")},e.onerror=function(){P("CSM JS loading failed")},e.src=t,document.body.appendChild(e),c.log("Viewability script injected")}}(),E.mraid3Comparison(),H()&&R("gmaSDK",{gmaversion:window.MRAID_ENV.sdkVersion})}function T(){l.style.width=window.innerWidth+"px",l.style.height=window.innerHeight+"px"}function W(){if(c.log("Attempting to detect interstitial"),0!==window.innerWidth&&0!==window.innerHeight){c.log("Inspecting for interstitial with iFrame size of ".concat(window.innerWidth,"x").concat(window.innerHeight)),320<window.innerWidth&&250<window.innerHeight&&(c.log("Interstitial threshold window area detected"),s=!0,c.log("Interstitial - removing iFrame resize event to assign width/height"),window.removeEventListener("resize",T),c.log("Interstitial - adding MRAID viewableChange event listener"),mraid.addEventListener("viewableChange",t),mraid.isViewable()&&!a&&t());var e=!1}else c.log("Window size not valid to detect for interstitial");function t(){mraid.isViewable()&&(a=!0,c.log("Interstitial - MRAID isViewable is true"),c.log("Interstitial - removing MRAID viewableChange event listener"),mraid.removeEventListener("viewableChange",t),c.log("Interstitial - assigning intersitial dimensions on viewable"),l.style.width="100vw",l.style.height="100vh",window.addEventListener("resize",n),window.setTimeout(function(){e||(c.log("Interstitial - notch detection fallback running for resize not firing"),n())},100))}function n(){if(e=!0,window.removeEventListener("resize",n),function(){var e=!1,t=document.createElement("div");CSS.supports("padding-top: env(safe-area-inset-top)")?(t.style.paddingTop=o?"200pt":"env(safe-area-inset-top)",t.style.paddingBottom=o?"100pt":"env(safe-area-inset-bottom)",t.style.paddingLeft=o?"50pt":"env(safe-area-inset-left)",t.style.paddingRight=o?"40pt":"env(safe-area-inset-right)",e=!0):CSS.supports("padding-top: constant(safe-area-inset-top)")&&(t.style.paddingTop=o?"200pt":"constant(safe-area-inset-top)",t.style.paddingBottom=o?"100pt":"constant(safe-area-inset-bottom)",t.style.paddingLeft=o?"50pt":"constant(safe-area-inset-left)",t.style.paddingRight=o?"40pt":"constant(safe-area-inset-right)",e=!0);if(e){document.body.appendChild(t);var n={top:parseInt(window.getComputedStyle(t).paddingTop,10),bottom:parseInt(window.getComputedStyle(t).paddingBottom,10),left:parseInt(window.getComputedStyle(t).paddingLeft,10),right:parseInt(window.getComputedStyle(t).paddingRight,10)};for(var i in document.body.removeChild(t),n)if(0<n[i])return!0}return!1}())return c.log("Interstitial - notch detected"),void function(){l.style.position="absolute",l.style.top="50%",l.style.left="50%",l.style.transform="translate(-50%, -50%)";var a=window.innerHeight>window.innerWidth?"portrait":"landscape";c.log("Interstitial - applying sizes for notch");var d=!1,s=!1;if(w&&H()){c.log("gmaSDK detected: ".concat(window.MRAID_ENV.sdkVersion));var e=window.MRAID_ENV.sdkVersion.split(".").map(function(e){return parseInt(e,10)}),t={major:e[0],minor:e[1],patch:e[2]};(7===t.major&&46<=t.minor||7<t.major)&&(d=!0,c.log("Interstitial - disabling iOS 13 logic for notch")),(7===t.major&&49<=t.minor||7<t.major)&&(s=!0,c.log("Interstitial - using window.orientation value for device rotation"))}function n(n){var i=10,o=0,r=!1;!function e(t){c.log("Interstitial - value of window.orientation is ".concat(window.orientation)),!0===n&&!0!==t?c.log("Interstitial - initializing notch dimensions: ".concat(a)):(s?a!==(a=0===window.orientation||-180===window.orientation?"portrait":"landscape")&&(r=!0,c.log("Interstitial - window.orientation value has changed, ending polling")):a="portrait"===a?"landscape":"portrait",c.log("Interstitial - notch orientation change: ".concat(a)));"portrait"===a?(l.style.width="100vw",l.style.height=B()&&!d?"100vh":B()&&d?"87vh":"90vh"):(l.style.width=B()&&d?"87vw":"90vw",l.style.height="100vh"),++o!==i?!0!==n&&s&&!r&&o<i&&window.setTimeout(function(){c.log("Interstitial - loopCount for checking orientation is ".concat(o)),e(!0)},100):c.log("Interstitial - ending polling, max loops reached")}(!1)}n(!0),window.addEventListener("orientationchange",n)}();r&&(c.log("Interstitial - adding resize event for Android to use pixels"),window.addEventListener("resize",function(){l.style.width=window.innerWidth+"px",l.style.height=window.innerHeight+"px"})),c.log("Interstitial - no notch detected")}}function B(){if(w){var e=window.navigator.userAgent.match(/OS [0-9]+/g);return!!e&&13<=parseInt(e[0].match(/[0-9]+/g)[0],10)}return!1}function H(){return!("3.0"!==mraid.getVersion()||!window.MRAID_ENV||"Google Mobile Ads"!==window.MRAID_ENV.sdk||!window.MRAID_ENV.sdkVersion)}function F(){var e=window.getComputedStyle(l),t=parseInt(e.width,10),n=parseInt(e.height,10),i=!0;if(c.log("iFrame measured at ".concat(t,"x").concat(n)),t<300||n<50?(i=!1,b||R("apsLibraryError",{e:{et:"iFrameSize",msg:"".concat(t,"x").concat(n)}})):b&&z.send({_type:"iFrameSizeValid",size:"".concat(t,"x").concat(n)},g),s)return i?void D():void window.addEventListener("resize",F);if(i||window.addEventListener("resize",F),D(),window.location.host.includes("mopub")&&!d){c.log("Forcing resize event for MoPub on invalid iFrame size"),d=!0;var o=window.document.createEvent("UIEvents");o.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(o)}}c.dispatchAppEvent=function(e,t,n,i,o){if("fb"===i)try{admob.events.dispatchAppEvent("mDTB","facebook")}catch(e){R("apsLibraryError",{e:{et:"mdtb-ad-rendering",msg:"admob/fb"}})}else c.loadAd(e,t,n,o)},c.toggleDebug=function(e){switch(e){case"enable":return n=!0,void 0===window.amznDebugState&&(window.amznDebugState=h),N(!0),c.log("Debug mode enabled");case"disable":return n=!1,void 0!==window.amznDebugState&&delete window.amznDebugState,N(!1),c.log("Debug mode disabled");case"unitTests":return o=!0,c.log("Disabling my.log console logs showing in unit tests");default:return c.log("unknown debug argument")}},c.loadAd=function(e,t,n,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{skadn:!1};!0===i&&(c.toggleDebug("enable"),c.log("Enabling debug mode, now all logs will be printed & http will used for connection."));var r=[{argName:"pricePoint",type:"string"},{argName:"suppliedBidId",type:"string"},{argName:"hostName",type:"string"},{argName:"debugOn",type:"boolean"},{argName:"configExtras",type:"object",argObjKeys:[{keyName:"skadn",type:"string"}]}],a=Array.prototype.slice.call(arguments).reduce(function(t,n,e){return $(n)!==r[e].type&&(t[r[e].argName]={type:r[e].type,passed:$(n)}),"object"===r[e].type&&r[e].argObjKeys&&r[e].argObjKeys.forEach(function(e){$(n[e.keyName])!==e.type&&(t[e.keyName]={type:e.type,passed:$(n[e.keyName])})}),t},{});if(a.suppliedBidId||(c.log("Setting bidId: ".concat(t)),g=t),a.hostName||-1!==n.indexOf("BAD")||(c.log("Overriding default aaxHost with: ".concat(n)),p=n),0<Object.keys(a).length&&(Object.keys(a).forEach(function(e){c.log('Invalid argument type passed to loadAd for "'.concat(e,'". Passed type ').concat(a[e].passed,", should be ").concat(a[e].type))}),R("apsLibraryError",{e:{et:"loadAdArgs",msg:Object.keys(a)}})),a.suppliedBidId||a.pricePoint)c.log("Error","Crucial arguments incorrectly passed, aborting");else{if(c.log("Setting pricepoint: ".concat(e)),u=e,"true"===o.skadn&&w&&(H()||location.href.includes("doubleclick"))){c.log('SKAdNetwork flag passed as "true", requesting google_mobile_app_ads.js');var d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src="https://media.admob.com/api/v1/google_mobile_app_ads.js",document.body.appendChild(d),f=!0}c.log("Making JSONP call to load the creative.");var s=document.createElement("script");s.type="text/javascript",s.src=m+p+"/e/msdk/adm?b="+g+"&ps="+u,document.body.appendChild(s),c.log("Creating viewport meta tag and adding it to head.");var l=document.createElement("meta");l.name="viewport",l.content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover",document.head.appendChild(l),function(){var e=["getVersion","isViewable","addEventListener","removeEventListener"];0<(e=void 0===window.mraid||"object"!==$(window.mraid)||null===window.mraid?["mraid"].concat(e):e.filter(function(e){return"function"!=typeof window.mraid[e]})).length&&R("apsLibraryError",{e:{et:"missingMraidMethods",msg:e}})}()}},c.renderAd=function(r){if(c.ev=r.ev,r&&r.html){var a=document.getElementById(i);if(a){c.log("Loading HTML creative:",r.html),a.innerHTML="",a.style.width="",a.style.height="";var d=!1;!function(e){return 0!==e.innerWidth&&0!==e.innerHeight}(window)?(window.addEventListener("resize",s),window.setTimeout(function(){!1===d&&window.removeEventListener("resize",s),s(!1)},1e3)):s(!1)}else c.log('Ad div not found. Please place an empty div with id="__dtbAd__" in the page, aborting!')}else c.log("Looks like there is no creative in JSONP call, aborting!");function s(e){if(!1===d){!(d=!0)!==e&&window.removeEventListener("resize",s),(l=document.createElement("iframe")).style.border="none",l.style.overflow="hidden",l.setAttribute("border","0"),l.setAttribute("id","apsAdIframe"),l.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation",a.appendChild(l);var t=K();t?(c.log("Serverless detected, assigning bridge width and height"),l.style.width=t.width+"px",l.style.height=t.height+"px"):(T(),c.log("Adding iFrame resize event to assign width/height for non-serverless ads"),window.addEventListener("resize",T)),l.contentWindow.mraid=window.mraid,l.contentWindow.amazon={},l.contentWindow.dtb=new J;var n=l.contentDocument||l.contentWindow.document,i=U(r.html),o="<style> body { margin: 0px; padding: 0px } </style>".concat(i);n.open("text/html"),n.write(o),n.close(),function(){c.log("Adjusting anchor links to _top");for(var e=l.getElementsByTagName("a"),t=0;t<e.length;t++){var n=e[t];n.onclick||n.target||(n.target="_top")}}(),V(),c.log("Adding window resizing event to detect interstitial area"),window.addEventListener("resize",W),W()}}};var K=function(){if(window.MRAID_ENV&&window.MRAID_ENV.amznAdInfo){var n=window.MRAID_ENV.amznAdInfo;return!!["width","height","type"].reduce(function(e,t){return n.hasOwnProperty(t)||(e=!1),e},!0)&&window.MRAID_ENV.amznAdInfo}return!1},U=function(e){var t=e.indexOf("mraid.js");return-1!==t&&(c.log("Purging extra mraid.js from the creative."),e=e.substring(0,t)+e.substring(t+8),c.log("New Creative: ",e)),e},J=function(){var r=mraid.open;this.sdkVersion="mDTB-js-1.0.1",this.os="Android",w&&(this.os="iOS"),"unknown"===c.sdkType&&(-1!==location.href.indexOf("mopub")?c.sdkType="mopub":-1!==location.href.indexOf("doubleclick")&&(c.sdkType="dfp")),mraid.open=function(e){if(f){c.log("SKAdNetwork flag enforced, mraid.open will dispatch click now to APS SDK");var t={bidId:g,destinationUrl:e};if(window.admob&&window.admob.events&&"function"==typeof window.admob.events.dispatchAppEvent)return window.admob.events.dispatchAppEvent("amzn_skadn",JSON.stringify(t)),void c.log("dispatch click to APS SDK successful");c.log("problem detecting bridge, proceeding without dispatch to APS SDK"),R("apsLibraryError",{e:{et:"dispatchAppEvent",msg:"not present"}})}if("string"==typeof e){if(c.log("Original URL:",e),/^amazonmobile:\/\//g.test(e)){var n=e.split("intent=");if(1<n.length){var i=n[n.length-1],o=decodeURIComponent(i);G(o)||R("apsLibraryError",{e:{et:"validateDLFallbackURL",msg:o}}),e="".concat("https://dl.amazon.com/redirect/ref=mm_1_aps-mobile-dl?campaignId=QALXjR&failureMode=MobileWebMostly&url=").concat(i),R("deepLink")}}c.log("Opening URL:",e),/^http/g.test(e)&&"mopub"===c.sdkType?(c.log("Opening url using mopub native interface."),r.apply(mraid,["mopubnativebrowser://navigate?url="+encodeURIComponent(e)])):(c.log("Opening url using mraid interface."),r.apply(mraid,arguments))}},this.openUrl=mraid.open}}(window.amzn.dtb),window.aax_render_ad=window.amzn.dtb.renderAd},function(e,t){e.exports=function(e){if("string"!=typeof e)return!1;var t=e.match(i);if(!t)return!1;var n=t[1];if(!n)return!1;if(o.test(n)||r.test(n))return!0;return!1};var i=/^(?:\w+:)?\/\/(\S+)$/,o=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,r=/^[^\s\.]+\.\S{2,}$/}]);
